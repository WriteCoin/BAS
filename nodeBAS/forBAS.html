<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>BAS скрипты</title>
</head>
<body>
<div class=api>
<span class=api01>function ignore_errors() { const callback = _function_argument("callback") || function() {}; const error_callback = _function_argument("error_callback") || function(err) {}; const error_message_func = _function_argument("error_message_func"); const message_ignore_func = _function_argument("message_ignore_func"); _call(function () { _on_fail(function () { VAR_LAST_ERROR = _result(); VAR_ERROR_ID = ScriptWorker.GetCurrentAction(); VAR_WAS_ERROR = false; _break(1, true); }); CYCLES.Current().RemoveLabel("function"); const message_ignore = message_ignore_func && message_ignore_func(); const message = (message_ignore === null || message_ignore === undefined) ? "Игнорирование ошибок" : message_ignore; log(message); callback()!; }, null)!; _if(VAR_WAS_ERROR,function(){ const error_message = error_message_func && error_message_func(); const message = (error_message === null || error_message === undefined) ? "Произошла ошибка : " + VAR_LAST_ERROR : error_message; log(message); error_callback(err)!; })!;};</span>
<span class=api02>function BAS_if() { const cond_func = _function_argument("cond_func") || true; const callback = _function_argument("callback") || function() {}; const callback_else = _function_argument("callback_else") || function() {}; _cycle_params().if_else = cond_func(); _if(_cycle_params().if_else, callback)!; _if(!_cycle_params().if_else, callback_else)!; delete _cycle_params().if_else;};</span>
<span class=api03>function BAS_while() { const cond_func = _function_argument("cond_func") || true; const callback = _function_argument("callback") || function(i) {}; const message_func = _function_argument("message_func"); _do(function(){ VAR_CYCLE_INDEX = _iterator() - 1; BREAK_CONDITION = cond_func(); if(!BREAK_CONDITION)_break(); const message = message_func && message_func(); const log_message = (message === null || message === undefined) ? "Текущее повторение цикла : " + VAR_CYCLE_INDEX : message; log(log_message); callback(VAR_CYCLE_INDEX)!; })!;};</span>
<span class=api04>function BAS_for() { const a = _function_argument("a"); const b = _function_argument("b"); const callback = _function_argument("callback") || function(i) {}; const message_func = _function_argument("message_func"); _do(function(){ VAR_CYCLE_INDEX = _iterator() - 1 + a; if(VAR_CYCLE_INDEX > b) _break(); const message = message_func && message_func(); const log_message = (message === null || message === undefined) ? "Текущее повторение цикла : " + VAR_CYCLE_INDEX : message; log(log_message); callback(VAR_CYCLE_INDEX)!; })!;};</span>
<span class=api05>function BAS_foreach() { const arrayList = _function_argument("arrayList"); const callback = _function_argument("callback"); const message_data_func = _function_argument("message_data_func"); const message_index_func = _function_argument("message_index_func"); _do_with_params({"foreach_data":(arrayList)},function(){ VAR_CYCLE_INDEX = _iterator() - 1; if(VAR_CYCLE_INDEX > _cycle_param("foreach_data").length - 1)_break(); VAR_FOREACH_DATA = _cycle_param("foreach_data")[VAR_CYCLE_INDEX]; const message_data = (message_data_func === null || message_data_func === undefined) ? "Текущие данные : " + VAR_FOREACH_DATA : message_data_func; log(message_data); const message_index = (message_index_func === null || message_index_func === undefined) ? "Текущее повторение цикла : " + VAR_CYCLE_INDEX : message_index_func; log(message_index); callback(VAR_CYCLE_INDEX, VAR_FOREACH_DATA)!; })!;};</span>
<span class=api06>function BAS_break(str) { str = str || "function"; _break(str);};</span>
<span class=api07>function BAS_continue(str) { str = str || "function"; _next(str);};</span>
<span class=api08>function BAS_set_goto_label() { const label = _function_argument("label"); _set_goto_label(label)!;};</span>
<span class=api09>function BAS_goto() { const label = _function_argument("label"); const offset = _function_argument("offset") || -1; const reverse = _function_argument("reverse") || []; const callback = _function_argument("callback") || function() {}; _long_goto(label, offset, reverse, callback)!;};</span>
<span class=api10>function BAS_set_global(name, value) { value = JSON.stringify(value); PSet("basglobal", name, value);};</span>
<span class=api11>function BAS_get_global(name) { return JSON.parse(P("basglobal", name) || "0");};</span>
<span class=api12>function BAS_inc_global(name, val) { BAS_set_global(name, BAS_get_global(name) + val);};</span>
<span class=api13>function BAS_cvs_parse(str, seps, varList, convert) { seps = seps || ":;,"; convert = convert || false; const csv_res = _csv_parse(str, seps, convert); const result = {}; for (CYCLE_INDEX = 0; CYCLE_INDEX < varList.length; CYCLE_INDEX++) { const i = CYCLE_INDEX; result[varList[i]] = _avoid_nilb(csv_res[i], ""); }; return result;};</span>
<span class=api14>function BAS_random(a, b) { return Math.floor(Math.random() * b - a + 1) + a;};</span>
</div>
<div class=browser_api>
<span class=browser_api01> function get_html_script() { const element = _function_argument("element"); page().script(element)!; _function_return(_result());};</span>
<span class=browser_api02>function get_browser_screen_settings() { _get_browser_screen_settings()!; const result = JSON.parse(_result()); _function_return({ scrollX: result["ScrollX"], scrollY: result["ScrollY"], cursorX: result["CursorX"], cursorY: result["CursorY"], width: result["Width"], height: result["Height"], }); _result_function();};</span>
<span class=browser_api03>function BAS_proxy() { const proxy = _function_argument("proxy"); const proxy_type = _function_argument("proxy_type"); const login = _function_argument("login"); const password = _function_argument("password"); const settings = _function_argument("settings"); const info = _function_argument("info");; const hash = proxy_set_hash(proxy, proxy_type, login, password);; if (_get_profile().length > 0) { if (hash.server.length === 0) { native("filesystem", "removefile", _get_profile() + "/proxy.txt"); } else { const portNumber = hash.Port; hash.Port = hash.Port.toString(); native("filesystem", "writefile", JSON.stringify({path: _get_profile() + "/proxy.txt",value: JSON.stringify(hash),base64:false,append:false})); hash["Port"] = portNumber; }; }; set_proxy(hash.server, hash.Port, hash.IsHttp, hash.name, hash.password)!; sleep(1000)!; set_proxy_extended(settings.changeTimeZone === "true", settings.changeLocation === "true", settings.changeIPWebRTC === "true", settings.changeBrowserLanguage === "true", settings.changeExternalIP === "true", info.methodIP, info.key, info.func)!; sleep(1000)!;};</span>
<span class=browser_api04>function BAS_javascript() { const script = _function_argument("script"); page().script2(script,JSON.stringify(_read_variables([])))!; const _parse_result = JSON.parse(_result()); _write_variables(JSON.parse(_parse_result.variables)); if(!_parse_result.is_success); fail(_parse_result.error);};</span>
<span class=browser_api05>function BAS_onLoadJavascript() { const script = _function_argument("script"); const url = _function_argument("url"); const tab = _function_argument("tab"); _set_target({ url: url, tab: tab, }); onloadjavascript(script)!;};</span>
<span class=browser_api06>function BAS_render(x, y, width, height) { const x = _function_argument("x"); const y = _function_argument("y"); const width = _function_argument("width"); const height = _function_argument("height"); render(x, y, width, height)!; _function_return(_result());};</span>
<span class=browser_api07>function BAS_solveCaptcha() { const dataBase64 = _function_argument("dataBase64"); const method = _function_argument("method"); const key = _function_argument("key"); const serverUrl = _function_argument("serverUrl"); solver_properties_clear(method); BAS_SolveRecaptcha_Serverurl = serverUrl; if (BAS_SolveRecaptcha_Serverurl.length > 0 && BAS_SolveRecaptcha_Serverurl.substr(BAS_SolveRecaptcha_Serverurl.length - 1) != "/") BAS_SolveRecaptcha_Serverurl += "/"; if(method === "rucaptcha") { if(BAS_SolveRecaptcha_Serverurl) solver_property("rucaptcha","serverurl",BAS_SolveRecaptcha_Serverurl); rucaptcha(key); }; if(method === "antigate") { if(BAS_SolveRecaptcha_Serverurl) solver_property("antigate","serverurl",BAS_SolveRecaptcha_Serverurl); antigate(key); }; if(method === "dbc") { if(BAS_SolveRecaptcha_Serverurl) solver_property("dbc","serverurl",BAS_SolveRecaptcha_Serverurl); dbc(key); }; if(method === "2captcha") { if(BAS_SolveRecaptcha_Serverurl) solver_property("2captcha","serverurl",BAS_SolveRecaptcha_Serverurl); twocaptcha(key); }; if(method === "capmonster" || method === "capmonsterimage" || method === "capmonsteraudio") { solver_property("capmonster","serverurl",BAS_SolveRecaptcha_Serverurl); capmonster(key); }; _if_else(method == "captchasniper", function(){ _switch_http_client_internal(); http_client_post(BAS_SolveRecaptcha_Serverurl, ["file","base64://" + dataBase64], {"content-type":("multipart"), "encoding":("UTF-8"), "method":("POST")})!; {const split = http_client_content().split("|");VAR_CAPTCHA_RESULT = split[split.length-1]}; _switch_http_client_main(); }, function(){ solve_base64("manual",dataBase64)!; VAR_CAPTCHA_RESULT = _result(); })!; _function_return(VAR_CAPTCHA_RESULT);};</span>
<span class=browser_api08>function BAS_solve_coordinates_captcha() { const args = _arguments(); _call_function(BASCaptchaSolver.solveCoordinatesCaptcha, { textInstructions: args.textInstructions || "", taskWaitTimeout: args.taskWaitTimeout || 0, taskWaitDelay: args.taskWaitDelay || 0, serviceName: args.serviceName || "rucaptcha", serviceUrl: args.serviceUrl || "", serviceKey: args.serviceKey || "", imageData: args.imageData || "", })!;};</span>
<span class=browser_api09>function BAS_settings() { const args = _arguments(); const Params = {}; const flash = args.flash || ""; const widevine = args.widevine || ""; const param_extensions = args.extensions || ""; _require_extensions(param_extensions)!; const extensions = (_result()); const commandLines = args.commandLines || ""; const webRTC = args.webRTC || ""; const webRTCIps = (args.webRTCIps || "").split(/\r?\n/).filter(function(x) { return x && x.length > 0; }).map(function(x) { return x.replace(/\s/g, ""); }).join(";"); const canvas = args.canvas || ""; const canvasNoise = args.canvasNoise || ""; const audio = args.audio || ""; const audioNoise = args.audioNoise || ""; const QUIC = args.QUIC || ""; const maxFPS = args.maxFPS || 0; const webGL = args.webGL || ""; const webGLNoise = args.webGLNoise || ""; const webGLVendor = args.webGLVendor || ""; const webGLRenderer = args.webGLRenderer || ""; if (flash.length > 0) Params.UseFlash = flash === "enable"; if (widevine.length > 0) Params.UseWidevine = widevine === "enable"; if (webRTC.length > 0) Params.Webrtc = webRTC; if (canvas.length > 0) Params.Canvas = canvas; if (canvasNoise.length > 0) Params.CanvasNoise = canvasNoise; if (audio.length > 0) Params.Audio = audio; if (audioNoise.length > 0) Params.AudioNoise = audioNoise; if (QUIC.length > 0) Params.QUIC = QUIC; if (maxFPS > 0) Params.MaxFPS = maxFPS; if (webGL.length > 0) Params.Webgl = webGL; if (webGLNoise.length > 0) Params.WebglNoise = webGLNoise; if (webGLVendor.length > 0) Params.Webgl.unmaskedVendor = webGLVendor; if (webGLRenderer.length > 0) Params.Webgl.unmaskedRenderer = webGLRenderer;; if (extensions.length > 0) Params.Extensions = extensions; if (extensions === "Clear") Params.Extensions = "";; if (commandLines.length > 0) Params.CommandLine = commandLines; if (commandLines === "Clear") Params.CommandLine = "";; if (webRTCIps.length > 0) Params.WebrtcIps = webRTCIps; if (webRTCIps === "Clear") Params.WebrtcIps = ""; _settings(Params)!;};</span>
</div>
<div class=network>
<span class=network01>function BAS_save_cookies() { save_cookies()!; _function_return("{\"cookies\":" + _result() + "}");};</span>
<span class=network02>function get_cookies(cookies) { VALUE = cookies; COOKIES = ""; if(VALUE.length > 0) { COOKIES = JSON.parse(VALUE)["cookies"]; if(typeof(COOKIES) == "undefined") COOKIES = ""; else COOKIES = JSON.stringify(COOKIES); }; cookies = COOKIES; return cookies;};</span>
<span class=network03>function BAS_load_cookies() { const cookies = _function_argument("cookies"); cookies = get_cookies(cookies); restore_cookies(cookies)!;};</span>
<span class=network04>function BAS_load_cookies_from_http_client() { _switch_http_client_main(); const cookies = get_cookies(http_client_save_cookies()); restore_cookies(cookies)!;};</span>
<span class=network05>function BAS_cache_get_status() { const match = _function_argument("match") || ""; const callback = _function_argument("callback"); cache_get_status(match, callback)!; _function_return(_result());};</span>
<span class=network06>function BAS_is_load() { const match = _function_argument("match"); const callback = _function_argument("callback"); is_load(match, callback)!; _function_return(_result());};</span>
<span class=network07>function BAS_get_cache() { const match = _function_argument("match"); const timeout = _function_argument("timeout"); if (timeout) waiter_timeout_next(timeout); wait_load(match)!; if (isBase64) cache_get_base64(match)!; else cache_get_string(match)!; _function_return(_result());};</span>
<span class=network08>function BAS_cache_get_all(match) { const match = _function_argument("match"); BAS_cache_get_all(match)!; _function_return(JSON.parse(_result()));};</span>
</div>
<div class=waiting>
<span class=waiting01> function wait_load_files() { wait_load("download://*")!; cache_get_string("download://*")!; const filepath = JSON.parse(native("filesystem", "fileinfo", _result()))["directory"] + "/" + _result(); _function_return(filepath);};</span>
</div>
<div class=email>
<span class=email01>function function proxy_set_hash(proxy, proxy_type, login, password) { const hash = proxy_parse(proxy); if (proxy_type !== "auto") { hash.IsHttp = proxy_type === "http"; }; if (login.length > 0 && password.length > 0) { hash.name = login; hash.password = password; }; return hash;};</span>
<span class=email02>function BAS_imap_client_set_proxy(proxy, proxy_type, login, password) { const args = _arguments(); const proxy = args.proxy || ""; const proxy_type = args.proxy_type || "http"; const login = args.login || ""; const password = args.password || ""; ; const hash = proxy_set_hash(proxy, proxy_type, login, password);; imap_client_set_proxy(hash.server, hash.Port, hash.IsHttp, hash.name, hash.password);};</span>
<span class=email03>function BAS_imap_client_messages_length() { const timeout = _function_argument("timeout"); general_timeout_next(timeout); imap_client_pull_messages_length()!; _function_return(imap_client_messages_length());};</span>
<span class=email04>function BAS_parse_message() { const timeout = _function_argument("timeout"); const id = _function_argument("id");; if (timeout) general_timeout_next(timeout); imap_client_pull_message(id)!; VAR_MAIL_BODY = imap_client_message(); const csv_parse_result = VAR_MAIL_BODY.match(LINK_REGEXP) || []; VAR_LINK1 = csv_parse_result[0]; if(typeof(VAR_LINK1) == "undefined" || !VAR_LINK1); { VAR_LINK1 = ""; }; VAR_LINK2 = csv_parse_result[1]; if(typeof(VAR_LINK2) == "undefined" || !VAR_LINK2); { VAR_LINK2 = ""; }; VAR_LINK3 = csv_parse_result[2]; if(typeof(VAR_LINK3) == "undefined" || !VAR_LINK3); { VAR_LINK3 = ""; };};</span>
<span class=email05>function BAS_imap_client_search(timeout, sender, subject, body, to, callback) { const args = _arguments(); const timeout = args.timeout; const sender = args.sender || ""; const subject = args.subject || ""; const body = args.body || ""; const to = args.to || ""; ; if (timeout) general_timeout_next(timeout); if (!args.callback) imap_client_search(sender, subject, body, to)!; else imap_client_search(sender, subject, body, to, args.callback)!; VAR_MAIL_BODY = imap_client_search_result(); if (VAR_MAIL_BODY.length > 0) VAR_MAIL_BODY = VAR_MAIL_BODY[VAR_MAIL_BODY.length - 1]; else; VAR_MAIL_BODY = ""; VAR_MAIL_ID = VAR_MAIL_BODY;; _call_function(BAS_parse_message, { timeout: timeout, id: VAR_MAIL_BODY; })!;; _function_return({ mail_body: imap_client_message(), mail_id: VAR_MAIL_ID, link1: VAR_LINK1, link2: VAR_LINK2, link3: VAR_LINK3; });};</span>
<span class=email06>function BAS_imap_client_search_all(sender, subject, body, to, callback) { const args = _arguments(); const sender = args.sender || ""; const subject = args.subject || ""; const body = args.body || ""; const to = args.to || ""; const callback = args.callback; if (args.timeout) general_timeout_next(args.timeout); if (!callback) imap_client_search(sender, subject, body, to)!; else imap_client_search(sender, subject, body, to, callback)!; _function_return(imap_client_search_result());};</span>
<span class=email07>function BAS_imap_client_get_message() { const timeout = _function_argument("timeout"); const id = _function_argument("id"); _call_function(BAS_parse_message, { timeout: timeout, id: id; })!; _function_return({ mail_body: VAR_MAIL_BODY; link1: VAR_LINK1, link2: VAR_LINK2, link3: VAR_LINK3; });};</span>
<span class=email08>function BAS_imap_client_delete_message(timeout, id) { const timeout = _function_argument("timeout"); const id = _function_argument("id");; if (timeout) general_timeout_next(timeout); imap_custom_query("%base%folder","STORE " + id + " +Flags \\Deleted","")!; imap_custom_query("%base%folder","EXPUNGE","")!;};</span>
</div>
<div class=http-client>
<span class=http-client01>function BAS_http_client_set_proxy(proxy, proxy_type, login, password) { const args = _arguments(); const proxy = args.proxy || ""; const proxy_type = args.proxy_type || "http"; const login = args.login || ""; const password = args.password || "";; const hash = proxy_set_hash(proxy, proxy_type, login, password);; _switch_http_client_main(); http_client_set_proxy( hash.server, hash.Port, hash.IsHttp, hash.name, hash.password; );};</span>
<span class=http-client02>function BAS_http_client_reset() { _switch_http_client_main(); new_http_client();};</span>
<span class=http-client03>function BAS_http_client_get() { const args = _arguments(); _switch_http_client_main(); if (args.timeout) general_timeout_next(args.timeout); const obj = { method: args.method, headers: args.headers; }; if (no_redirect) http_client_get_no_redirect2(args.url, obj)!; else http_client_get2(args.url, obj)!;};</span>
<span class=http-client04>function BAS_http_client_post() { const args = _arguments(); _switch_http_client_main(); if (args.timeout) general_timeout_next(args.timeout); const obj = { content-type: "custom/" + args.content_type, encoding: args.encoding, method: args.method, headers: args.headers; }; if (!args.no_redirect) http_client_post(args.url, ["data", args.data], obj)!; else http_client_post_no_redirect(args.url, ["data", args.data], obj)!;};</span>
<span class=http-client05>function BAS_http_client_download() { const args = _arguments(); _switch_http_client_main(); if (args.timeout) general_timeout_next(args.timeout); http_client_download(args.url, args.filepath)!;};</span>
<span class=http-client06>function BAS_http_client_url() { _switch_http_client_main(); return http_client_url();};</span>
<span class=http-client07>function BAS_http_client_encoded_content(encoding) { _switch_http_client_main(); return http_client_encoded_content(encoding);};</span>
<span class=http-client08>function BAS_http_client_status() { _switch_http_client_main(); return http_client_status();};</span>
<span class=http-client09>function BAS_http_client_header(header) { _switch_http_client_main(); return http_client_header(header);};</span>
<span class=http-client10>function BAS_http_client_set_header(header_name, header_value) { _switch_http_client_main(); http_client_set_header(header_name, header_value);};</span>
<span class=http-client11>function BAS_http_client_clear_header() { _switch_http_client_main(); http_client_clear_header();};</span>
<span class=http-client12>function BAS_http_client_save_cookies() { _switch_http_client_main(); return http_client_save_cookies();};</span>
<span class=http-client13>function BAS_http_client_restore_cookies(cookies) { _switch_http_client_main(); http_client_restore_cookies(cookies);};</span>
<span class=http-client14>function BAS_http_client_restore_cookies_from_browser() { save_cookies()!; _switch_http_client_main(); http_client_restore_cookies(JSON.stringify({cookies:JSON.parse(_result())}));};</span>
<span class=http-client15>function BAS_http_client_set_fail_on_error(fail_on_error) { _switch_http_client_main(); http_client_set_fail_on_error(fail_on_error === "fail");};</span>
<span class=http-client16>function BAS_http_client_was_error() { _switch_http_client_main(); return http_client_was_error();};</span>
<span class=http-client17>function BAS_http_client_error_string() { _switch_http_client_main(); return http_client_error_string();};</span>
<span class=http-client18>function BAS_http_client_xpath_xml(query, do_not_fail) { _switch_http_client_main(); return http_client_xpath_xml(query, do_not_fail);};</span>
<span class=http-client19>function BAS_http_client_xpath_xml_list(query, do_not_fail) { _switch_http_client_main(); return http_client_xpath_xml_list(query, do_not_fail);};</span>
<span class=http-client20>function BAS_http_client_xpath_text(query, do_not_fail) { _switch_http_client_main(); return http_client_xpath_text(query, do_not_fail);};</span>
<span class=http-client21>function BAS_http_client_xpath_text_list(query, do_not_fail) { _switch_http_client_main(); return http_client_xpath_text_list(query, do_not_fail);};</span>
<span class=http-client22>function BAS_http_client_xpath_count(query, do_not_fail) { _switch_http_client_main(); return http_client_xpath_count(query, do_not_fail);};</span>
<span class=http-client23>function BAS_http_client_xpath_exists(query) { _switch_http_client_main(); return http_client_xpath_exist(query);};</span>
</div>
<div class=date_and_time>
<span class=date_and_time01>function BAS_parse_milliseconds(value) { return _parse_date(value, "auto");};</span>
<span class=date_and_time02>function BAS_milliseconds_from_date(value) { return _parse_date(value, "auto").getTime();};</span>
<span class=date_and_time03>function BAS_create_date( year, month, day, hour, minutes, seconds, milliseconds, timezone;) { const date = new Date( Date.UTC(year, month - 1, day, hour, minutes, seconds, milliseconds); ); date.getTimezoneOffset = function () { return parseInt(timezone); }; return date;};</span>
<span class=date_and_time04>function BAS_change_date( value, year, month, day, hour, minutes, seconds, milliseconds;) { const date = _parse_date(value, "auto"); const offset = date.getTimezoneOffset(); const newDate = new Date(date.getTime()); newDate.getTimezoneOffset = function () { return offset; }; if (year !== -1) newDate.setFullYear(year); if (month !== -1) newDate.setMonth(month - 1); if (day !== -1) newDate.setDate(day); if (hour !== -1) newDate.setHours(hour); if (minutes !== -1) newDate.setMinutes(minutes); if (seconds !== -1) newDate.setSeconds(seconds); if (milliseconds !== -1) newDate.setMilliseconds(milliseconds); return newDate;};</span>
<span class=date_and_time05>function BAS_add_time(value, seconds, minutes, hours, days) { const date = _parse_date(value, "auto"); const offset = date.getTimezoneOffset(); const newDate = new Date( date.getTime() +; seconds * 1000 +; minutes * 1000 * 60 +; hours * 1000 * 60 * 60 +; days * 1000 * 60 * 60 * 24; ); newDate.getTimezoneOffset = function () { return offset; }; return newDate;};</span>
<span class=date_and_time06>function BAS_difference_between_dates(value1, value2) { return Math.floor( (_parse_date(value1, "auto").getTime() -; _parse_date(value2, "auto").getTime()) /; 1000; );};</span>
<span class=date_and_time07>function BAS_current_date() { const date = _parse_date(Date.now(), "auto"); date.getTimezoneOffset = function () { return parseInt(netive("datetime", "systemtimezone", "")); }; return date;};</span>
<span class=date_and_time08>function BAS_date_change_timezone(value, timezone) { const date = _parse_date(value, "auto"); const newDate = new Date(date.getTime()); newDate.getTimezoneOffset = function () { return parseInt(timezone); }; return newDate;};</span>
<span class=date_and_time09>function BAS_date_get_timezone(value) { return _parse_date(value, "auto").getTimezoneOffset();};</span>
<span class=date_and_time10>function BAS_get_day_of_month(value) { return parseInt(_format_date(value, "d"));};</span>
<span class=date_and_time11>function BAS_get_day_of_week(value) { return parseInt(_format_date(value, "N"));};</span>
<span class=date_and_time12>function BAS_get_day_of_year(value) { return parseInt(_format_date(value, "Z"));};</span>
<span class=date_and_time13>function BAS_get_year_from_date(value) { return parseInt(_format_date(value, "yyyy"));};</span>
<span class=date_and_time14>function BAS_get_month_from_date(value) { return parseInt(_format_date(value, "M"));};</span>
<span class=date_and_time15>function BAS_get_hours_from_date(value) { return parseInt(_format_date(value, "h"));};</span>
<span class=date_and_time16>function BAS_get_minutes_from_date(value) { return parseInt(_format_date(value, "m"));};</span>
<span class=date_and_time17>function BAS_get_seconds_from_date(value) { return parseInt(_format_date(value, "s"));};</span>
<span class=date_and_time18>function BAS_get_milliseconds_from_date(value) { return parseInt(_format_date(value, "z"));};</span>
</div>
<div class=filesystem>
<span class=filesystem01> function BAS_read_file(filepath, from, to, isBase64) { return native("filesystem", "readfile", JSON.stringify({ value: filepath, base64: isBase64, from: from, to: to; }));};</span>
<span class=filesystem02>function BAS_write_file(filepath, data, isLn, isAppend, isBase64) { native("filesystem", "writefile", JSON.stringify({ path: filepath, value: data.toString() + "\r" + (isLn ? "\n" : ""), base64: isBase64, append: isAppend; }));};</span>
<span class=filesystem03>function BAS_file_info(filename) { const json = JSON.parse(native("filesystem", "fileinfo", filename)); return { exists: json.exists, size: json.size, baseDirectory: json.directory, isDirectory: json.is_directory, lastModified: new Date(json.last_modified * 1000); };};</span>
<span class=filesystem04>function BAS_create_dir(dirname) { native("filesystem", "createdir", firname);};</span>
<span class=filesystem05>function BAS_remove_file(path) { native("filesystem", "removefile", path);};</span>
<span class=filesystem06>function BAS_move_file(path, dest) { native("filesystem", "movefile", { path: path, dest: dest; });};</span>
<span class=filesystem07>function BAS_copy_file(path, dest) { native("filesystem", "copyfile", { path: path, dest: dest; });};</span>
<span class=filesystem08>function BAS_search_files(folder, mask, contains, include_folders, include_files, recursive) { const args = _arguments(); native_async("filesystem", "search", JSON.stringify({ folder: args.folder, mask: args.mask, contains: args.contains, include_folders: args.include_folders, include_files: args.include_files, recursive: args.recursive; }))!; _function_return(JSON.parse(_result()).d);};</span>
<span class=filesystem09>function BAS_read_file_to_array(filepath) { const d = BAS_read_file(filepath, 0, 0, false); return d.length === 0 ? [] : d.split(/\r?\n/);};</span>
<span class=filesystem10>function BAS_write_file_array(filepath, arr, isLn, isBase64, isAppend) { native("filesystem", "writefile", JSON.stringify({ path: filepath, value: arr.join("\r\n") + (isLn ? "\r\n" : ""), base64: false, append: isAppend; }));};;</span>
</div>
<div class=fingersprint>
<span class=fingersprint01>function BAS_get_fingerprint() { const args = _arguments(); _call(BrowserAutomationStudio_GetFingerprint, [args])!; _result_function(_result());};</span>
<span class=fingersprint02>function BAS_apply_fingerprint() { const args = _arguments(); _call(BrowserAutomationStudio_ApplyFingerprint, [; args.fingerprint, args.safeUseCanvas, args.safeUseWebGL, args.safeUseAudio, args.safeUseBattery, args.safeUseClientRect, args.safeUsePerfectCanvas, args.emulationDeviceSensors; ])!; sleep(1000)!;};</span>
<span class=fingersprint03>function BAS_fingerprint_performance() { const args = _arguments(); _call(BrowserAutomationStudio_PerformanceFingerprint, args)!;};</span>
</div>
<div class=async>
<span class=async01>function BAS_async() { const args = _arguments(); const thread_id = args.thread_id || 0; const stop_thread = args.stop_thread || true; const behaviour_inactive = args.behaviour_inactive || "wait"; const max_funcs = args.max_funcs || 30; VAR_THREAD_ID = 0; if(VAR_THREAD_ID <= 0) { VAR_THREAD_ID = Math.floor(Math.random() * 1000000) + 1; }; if(typeof(VAR_THREAD_LIST) == "undefined") { VAR_THREAD_LIST = []; }; if((VAR_THREAD_LIST).indexOf(VAR_THREAD_ID) < 0) { (VAR_THREAD_LIST).push(VAR_THREAD_ID); }; _thread_start(VAR_THREAD_ID, 0 == thread_id, args.func, {}, stop_thread, max_funcs, behaviour_inactive !== "wait")!; _function_return({ thread_id: VAR_THREAD_ID, thread_list: VAR_THREAD_LIST, });};</span>
<span class=async02>function BAS_thread_wait() { const args = _arguments(); const timeout = args.timeout || 100000000; waiter_timeout_next(timeout); _thread_wait(args.thread_id);};</span>
<span class=async03>function BAS_thread_get_status(thread_id) { const thread_data = _thread_get_status(thread_id); return { result: thread_data.result, is_running: thread_data.is_running, error: thread_data.error, is_success: thread_data.is_success, };};</span>
</div>
<div class=inactivity_emulation>
<span class=inactivity_emulation01>function BAS_inactivity_emulation() { const args = _arguments(); IDDLE_EMULATION_END = Date.now() + 1000 * (args.time); IDDLE_EMULATION_DISTRIBUTION = args.expectations; _get_browser_screen_settings()!; IDDLE_EMULATION_RESULT = JSON.parse(_result()); IDDLE_CURSOR_POSITION_X = IDDLE_EMULATION_RESULT["CursorX"]; IDDLE_CURSOR_POSITION_Y = IDDLE_EMULATION_RESULT["CursorY"]; IDDLE_CURSOR_POSITION_WIDTH = IDDLE_EMULATION_RESULT["Width"]; IDDLE_CURSOR_POSITION_HEIGHT = IDDLE_EMULATION_RESULT["Height"]; IDDLE_CURSOR_POSITION_WAS_SCROLL = false; _do(function(){ if(Date.now() >= IDDLE_EMULATION_END); _break(); IDDLE_EMULATION_CURRENT_ITEM = IDDLE_EMULATION_DISTRIBUTION[Math.floor(Math.random()*IDDLE_EMULATION_DISTRIBUTION.length)]; if(_iterator() == 1 && IDDLE_EMULATION_DISTRIBUTION.indexOf(2)>=0); IDDLE_EMULATION_CURRENT_ITEM = 2; _if(IDDLE_EMULATION_CURRENT_ITEM == 1, function(){ ; IDDLE_EMULATION_CURRENT_DIRECTION = (rand(1,2) == 2) ? "<MOUSESCROLLUP>" : "<MOUSESCROLLDOWN>"; if(!IDDLE_CURSOR_POSITION_WAS_SCROLL); IDDLE_EMULATION_CURRENT_DIRECTION = "<MOUSESCROLLDOWN>"; IDDLE_CURSOR_POSITION_WAS_SCROLL = true; IDDLE_EMULATION_CURRENT_NUMBER = rand(1,5); _do(function(){ if(_iterator() >= IDDLE_EMULATION_CURRENT_NUMBER); _break(); _type(IDDLE_EMULATION_CURRENT_DIRECTION,1000)!; sleep(rand(300,1000))!; })!; })!; _if(IDDLE_EMULATION_CURRENT_ITEM == 2, function(){ ; page().script("document.documentElement.scrollLeft")!; IDDLE_CURSOR_POSITION_SCROLL_X = parseInt(_result()); page().script("document.documentElement.scrollTop")!; IDDLE_CURSOR_POSITION_SCROLL_Y = parseInt(_result()); IDDLE_CURSOR_POSITION_X = rand(1,IDDLE_CURSOR_POSITION_WIDTH); IDDLE_CURSOR_POSITION_Y = rand(1,IDDLE_CURSOR_POSITION_HEIGHT); move(IDDLE_CURSOR_POSITION_SCROLL_X + IDDLE_CURSOR_POSITION_X,IDDLE_CURSOR_POSITION_SCROLL_Y + IDDLE_CURSOR_POSITION_Y)!; })!; _if(IDDLE_EMULATION_CURRENT_ITEM == 3, function(){ ; if(IDDLE_CURSOR_POSITION_X < 0 || IDDLE_CURSOR_POSITION_Y < 0); _break(); page().script("document.documentElement.scrollLeft")!; IDDLE_CURSOR_POSITION_SCROLL_X = parseInt(_result()); page().script("document.documentElement.scrollTop")!; IDDLE_CURSOR_POSITION_SCROLL_Y = parseInt(_result()); IDDLE_EMULATION_CURRENT_NUMBER = rand(1,4); _do(function(){ if(_iterator() >= IDDLE_EMULATION_CURRENT_NUMBER); _break(); IDDLE_CURSOR_POSITION_X += rand(-50,50); IDDLE_CURSOR_POSITION_Y += rand(-50,50); if(IDDLE_CURSOR_POSITION_X > IDDLE_CURSOR_POSITION_WIDTH); IDDLE_CURSOR_POSITION_X = IDDLE_CURSOR_POSITION_WIDTH; if(IDDLE_CURSOR_POSITION_Y > IDDLE_CURSOR_POSITION_HEIGHT); IDDLE_CURSOR_POSITION_Y = IDDLE_CURSOR_POSITION_HEIGHT; if(IDDLE_CURSOR_POSITION_X < 0); IDDLE_CURSOR_POSITION_X = 0; if(IDDLE_CURSOR_POSITION_Y < 0); IDDLE_CURSOR_POSITION_Y = 0; move(IDDLE_CURSOR_POSITION_SCROLL_X + IDDLE_CURSOR_POSITION_X,IDDLE_CURSOR_POSITION_SCROLL_Y + IDDLE_CURSOR_POSITION_Y)!; _if(rand(1,10) > 3,function(){ sleep(rand(10,300))!; })!; })!; })!; _if(IDDLE_EMULATION_CURRENT_ITEM == 4, function(){ ; sleep(rand(500,5000))!; })!; })!;};</span>
</div>
<div class=image>
<span class=image01>function BAS_load_image(data_base64) { return native("imageprocessing", "load", data_base64);};</span>
<span class=image02>function BAS_delete_image(image_id) { native("imageprocessing", "delete", image_id);};</span>
<span class=image03>function BAS_create_image(width, height, red, green, blue, alpha) { width = width || 800; height = height || 800; red = red || 255; green = green || 255; blue = blue || 255; alpha = alpha || 255; return native( "imageprocessing", "create", width + "," + height + "," + red + "," + green + "," + blue + "," + alpha; );};</span>
<span class=image04>function BAS_convert_image(image_id, format) { native("imageprocessing", "convert", image_id + "," + format);};</span>
<span class=image05>function BAS_get_image_data(image_id) { return native("imageprocessing", "getdata", image_id);};</span>
<span class=image06>function BAS_image_get_pixel(image_id, x, y) { const split = native( "imageprocessing", "getpixel", image_id + "," + x + "," + y; ).split(","); return { R: parseInt(split[0]), G: parseInt(split[1]), B: parseInt(split[2]), A: parseInt(split[3]), };};</span>
<span class=image07>function BAS_image_set_pixel(image_id, x, y, red, green, blue, alpha) { native( "imageprocessing", "setpixel", image_id +; "," +; x +; "," +; y +; "," +; red +; "," +; green +; "," +; blue +; "," +; alpha; );};</span>
<span class=image08>function BAS_image_get_size(image_id) { const split = native("imageprocessing", "getsize", image_id).split(","); return { width: parseInt(split[0]), height: parseInt(split[1]), };};</span>
<span class=image09>function BAS_image_resize(image_id, width, height) { native("imageprocessing", "resize", image_id + "," + width + "," + height);};</span>
<span class=image10>function BAS_image_insert(target_image_id, source_image_id, x, y) { native( "imageprocessing", "insert", target_image_id + "," + source_image_id + "," + x + "," + y; );};</span>
<span class=image11>function BAS_image_find(target_image_id, source_image_id) { const split = native( "imageprocessing", "find", target_image_id + "," + source_image_id; ).split(","); return { found_subimage_x: split[0], found_subimage_y: split[1], threshold: split[2], };};</span>
<span class=image12>function BAS_image_fill( image_id, x, y, width, height, red, green, blue, alpha;) { x = x || 0; y = y || 0; width = width || 100; height = height || 100; red = red || 255; green = green || 255; blue = blue || 255; alpha = alpha || 255; native( "imageprocessing", "fill", image_id +; "," +; x +; "," +; y +; "," +; width +; "," +; height +; "," +; red +; "," +; green +; "," +; blue +; "," +; alpha; );};</span>
<span class=image13>function BAS_image_sub(image_id, x, y, width, height) { x = x || 0; y = y || 0; width = width || 800; height = height || 800; return native( "imageprocessing", "sub", image_id + "," + x + "," + y + "," + width + "," + height; );};</span>
<span class=image14>function BAS_image_text(image_id, text, params) { const x = params.x || 0; const y = params.y || 0; const width = params.width || 800; const height = params.height || 800; const font = params.font || "Arial"; const fontSize = params.fontSize || 15; const fontRed = params.fontRed || 0; const fontGreen = params.fontGreen || 0; const fontBlue = params.fontBlue || 0; const fontAlpha = params.fontAlpha || 255; const verticalAlign = params.verticalAlign || "top"; const gorizontalAlign = params.gorizontalAlign || "center"; native( "imageprocessing", "text", verticalAlign +; "," +; gorizontalAlign +; "," +; image_id +; "," +; x +; "," +; y +; "," +; width +; "," +; height +; "," +; font +; "," +; fontRed +; "," +; fontGreen +; "," +; fontBlue +; "," +; fontAlpha +; "," +; fontSize +; "," +; text; );};</span>
</div>
<div class=json>
<span class=json01>function BAS_json_value(json, json_path_query) { try { return JPath.value(json, json_path_query); } catch (e) { fail(e); };};</span>
<span class=json02>function BAS_json_values(json, json_path_query) { try { return JPath.values(json, json_path_query); } catch (e) { fail(e); };};</span>
<span class=json03>function BAS_json_key(json, json_path_query) { try { return JPath.key(json, json_path_query); } catch (e) { fail(e); };};</span>
<span class=json04>function BAS_json_keys(json, json_path_query) { try { return JPath.keys(json, json_path_query); } catch (e) { fail(e); };};</span>
<span class=json05>function BAS_json_count(json, json_path_query) { try { return JPath.count(json, json_path_query); } catch (e) { fail(e); };};</span>
<span class=json06>function BAS_json_change(json, json_path_query, value) { try { return JPath.change(json, json_path_query, value); } catch (e) { fail(e); };};</span>
<span class=json07>function BAS_json_remove(json, json_path_query) { try { return JPath.remove(json, json_path_query); } catch (e) { fail(e); };};</span>
<span class=json08>function BAS_json_check_format(json_str) { try { return JPath.checkFormat(json_str); } catch (e) { fail(e); };};</span>
<span class=json09>function BAS_json_change_format(json_str, new_format) { try { return JPath.changeFormat(json_str, new_format); } catch (e) { fail(e); };};</span>
</div>
<div class=array>
<span class=array01>function lastListElement(arr) { if (arr.length > 0) return arr[arr.length - 1]; else return null;};</span>
<span class=array02>function randomListElement(arr) { const r = Math.floor(Math.random() * arr.length); return arr[r];};</span>
<span class=array03>function setListElement(arr, index, value) { arr[index < 0 ? arr.length + index : index] = value; return arr;};</span>
<span class=array04>function deleteListValue(arr, value) { return arr.filter(function (e) { return e !== value; });};</span>
<span class=array05>function listContains(arr, value) { return arr.indexOf(value) >= 0;};</span>
<span class=array06>function subList(arr, index, len) { return arr.slice().splice(index, len);};</span>
<span class=array07>function listRemoveDuplicates(arr) { const seen = {}; return arr.filter(function (item) { return seen.hasOwnProperty(item) ? false : (seen[item] = true); });};</span>
<span class=array08>function listCopy(arr) { return arr.slice();};</span>
<span class=array09>function listShuffle(arr) { var j, x, i; for (i = arr.length; i; i--) { j = Math.floor(Math.random() * i); x = arr[i - 1]; arr[i - 1] = arr[j]; arr[j] = x; }; return arr;};</span>
<span class=array10>function listMerge(source, target) { return source.concat(target.slice());};</span>
<span class=array11>function listCompare(arr, arrCompare) { return (JSON.stringify(arr.slice().sort()) === JSON.stringify(arrCompare.slice().sort()));};</span>
</div>
<div class=path>
<span class=path01>function BAS_filename_from_path(path, ext) { return _path.basename(path, ext);};</span>
<span class=path02>function BAS_dirname_from_path(path) { return _path.dirname(path);};</span>
<span class=path03>function BAS_extname_from_path(path) { return _path.extname(path);};</span>
<span class=path04>function BAS_path_is_absolute(path) { return _path.isAbsolute(path);};</span>
<span class=path05>function BAS_path_join(path1, path2, path3, pathList) { return _path; .join([_avoid_nil(path1), _avoid_nil(path2), _avoid_nil(path3)]); .concat(_to_arr(_avoid_nilb(pathList, [])));};</span>
<span class=path06>function BAS_path_normalize(path, removeTrailingSlash) { return _path.normalize(path, removeTrailingSlash);};</span>
<span class=path07>function BAS_path_parse(path) { const parse_res = _path.parse(path); return { root: parse_res.root, directory: parse_res.dir, base_name: parse_res.base, file_extension: parse_res.ext, file_name: parse_res.name, items_list: parse_res.items; };};</span>
<span class=path08>function BAS_get_system_path() { const name = _function_argument("name"); _call_function(_get_system_path, { name: name; })!; _function_return(_result_function());};</span>
</div>
<div class=phone_confirm>
<span class=phone_confirm01>function BAS_phone_get_number() { const args = _arguments(); _call_function(_SMS.getNumber, { service: args.service, apiKey; args.apiKey, site: args.site, country: args.country, operator: args.operator, customSite: args.customSite, customCounty: args.customCountry, serverUrl: args.serverUrl, timeout: args.timeout; })!; _function_return(_result_function());};</span>
<span class=phone_confirm02>function BAS_phnoe_get_activation_code() { const args = _arguments(); _call_function(_SMS.waitCode, { number: args.number, interval: args.interval, timeout: args.timeout; })!; _function_return(_result_function());};</span>
<span class=phone_confirm03>function BAS_phone_change_activation_status() { const args = _arguments(); _call_function(_SMS.setStatus, { number: args.number, status: args.status, deleteInfo: args.deleteInfo, timeout: args.timeout; })!;};</span>
<span class=phone_confirm04>function BAS_phone_get_balance() { const args = _arguments(); _call_function(_SMS.getBalance, { service: args.service, apiKey: args.apiKey, serverUrl: args.serverUrl, timeout: args.timeout; })!; _function_return(_result_function());};</span>
<span class=phone_confirm05>function BAS_phone_get_numbers_count() { const args = _arguments(); _call_function(_SMS.getNumbersCount, { service: args.service, apiKey: args.apiKey, site: args.site, country: args.country, customSite: args.customSite, customCountry: args.customCountry, serverUrl: args.serverUrl, timeout: args.timeout; })!; _function_return(_result_function());};</span>
<span class=phone_confirm06>function BAS_phone_get_sites() { const args = _arguments(); _call_function(_SMS.getSites, { service: args.service, apiKey: args.apiKey, serverUrl: args.serverUrl, timeout: args.timeout; })!; _function_return(_result_function());};</span>
<span class=phone_confirm07>function BAS_phone_get_countries() { const args = _arguments(); _call_function(_SMS.getCountries, { service: args.service, apiKey: args.apiKey, serverUrl: args.serverUrl, timeout: args.timeout; })!; _function_return(_result_function());};</span>
<span class=phone_confirm08>function BAS_phone_set_debug(enable) { _SMS.setDebug(enable);};</span>
</div>
<div class=process_manage>
<span class=process_manage01>function BAS_process_run() { const args = _arguments(); const script = args.script; const dir = args.dir; RANDOM_FILE = "temp_" + rand() + ".bat"; native("filesystem", "writefile", JSON.stringify({path: RANDOM_FILE,value: "chcp 65001\r\n" + ((dir.length>0) ? ("cd " + dir + "\r\n") : "" ) + ((script).replace(/\r?\n/g, "\r\n")),base64:false,append:false})); native_async("processmanager", "start", JSON.stringify({location: RANDOM_FILE, working_folder: "", waitfinish: true, arguments: "", version: 2}))!; try; { var split = _result().split(","); VAR_PROCESS_STANDART_OUTPUT = base64_decode(split[0]); VAR_PROCESS_ERROR_OUTPUT = base64_decode(split[1]); }catch(e); { VAR_PROCESS_STANDART_OUTPUT = _result(); }; sleep(1000)!; native("filesystem", "removefile", RANDOM_FILE); _function_return({ process_standart_output: VAR_PROCESS_STANDART_OUTPUT, process_error_output: VAR_PROCESS_ERROR_OUTPUT; });};</span>
</div>
<div class=profile>
<span class=profile01>function BAS_create_or_switch_permanent_profile() { const args = _arguments(); ProfilePath = args.path; _do(function(){ if(ProfilePath == _get_profile()); _break(); if(_iterator() > 30); fail(tr("Timeout during switching to profile ") + ProfilePath); native("filesystem", "removefile", ProfilePath + "/lockfile"); if(!JSON.parse(native("filesystem", "fileinfo", ProfilePath + "/lockfile"))["exists"]); _break(); sleep(1000)!; })!; var Params = {}; Params["ProfilePath"] = ProfilePath; Params["LoadFingerprintFromProfileFolder"] = args.always_upload_fingerprint; _settings(Params)!; _if(args.always_upload_fingerprint, function(){ FINGERPRINT_JSON = native("filesystem", "readfile", JSON.stringify({value: args.path + "/fingerprint.json",base64:false,from:0,to:0})); _if(FINGERPRINT_JSON.length > 0, function(){ FINGERPRINT_JSON = JSON.parse(FINGERPRINT_JSON); _call(BrowserAutomationStudio_ApplyFingerprint,[FINGERPRINT_JSON["fingerprint"],FINGERPRINT_JSON["canvas"],FINGERPRINT_JSON["webgl"],FINGERPRINT_JSON["audio"],FINGERPRINT_JSON["battery"],FINGERPRINT_JSON["rectangles"],FINGERPRINT_JSON["perfectcanvas"],FINGERPRINT_JSON["sensor"]])!; sleep(1000)!; })!; FINGERPRINT_JSON = native("filesystem", "readfile", JSON.stringify({value: args.path + "/performance.json",base64:false,from:0,to:0})); _if(FINGERPRINT_JSON.length > 0, function(){ FINGERPRINT_JSON = JSON.parse(FINGERPRINT_JSON); _call(BrowserAutomationStudio_PerformanceFingerprint,FINGERPRINT_JSON)!; })!; })!; _if(args.always_upload_proxy, function(){ var is_error = false; try; { _ARG = JSON.parse(native("filesystem", "readfile", JSON.stringify({value: args.path + "/proxy.txt",base64:false,from:0,to:0}))); _ARG["Port"] = parseInt(_ARG["Port"]); }catch(e); { is_error = true; }; _if(!is_error, function(){ set_proxy(_ARG["server"], _ARG["Port"], _ARG["IsHttp"], _ARG["name"], _ARG["password"])!; sleep(1000)!; set_proxy_extended(true, true, true, true, true)!; sleep(1000)!; })!; })!;};</span>
<span class=profile02>function BAS_switch_to_temporary_profile() { const Params = {}; Params["ProfilePath"] = "<Incognito>"; _settings(Params)!;};</span>
<span class=profile03>function BAS_profile_copy(path) { const ProfilePath = _get_profile(); native("filesystem", "copyfile", JSON.stringify({ path: ProfilePath, dest: path; }));};</span>
<span class=profile04>function BAS_delete_profile() { const args = _arguments(); ProfilePath = args.path; if(ProfilePath == ""); ProfilePath = _get_profile(); _if(ProfilePath == _get_profile(), function(){ var Params = {}; Params["ProfilePath"] = "<Incognito>"; _settings(Params)!; })!; _do(function(){ if(_iterator() > 30); fail(tr("Timeout during deleting profile ") + ProfilePath); native("filesystem", "removefile", ProfilePath + "/lockfile"); if(!JSON.parse(native("filesystem", "fileinfo", ProfilePath + "/lockfile"))["exists"]); _break(); sleep(1000)!; })!; native("filesystem", "removefile", ProfilePath);};</span>
<span class=profile05>function BAS_current_profile_info() { const profile_id = _get_profile(); const has_proxy = _get_profile().length > 0 && JSON.parse(native("filesystem", "fileinfo", _get_profile() + "/proxy.txt"))["exists"]; const has_fingerprint = _get_profile().length > 0 && JSON.parse(native("filesystem", "fileinfo", _get_profile() + "/fingerprint.json"))["exists"]; return { profile_id: profile_id, has_proxy: has_proxy, has_fingerprint: has_fingerprint; };};</span>
</div>
<div class=regular_expressions>
<span class=regular_expressions01>function BAS_regexp_first(text, regexp) { const regexp_result = native( "regexp", "first", JSON.stringify({ text: text, regexp: regexp }); ); if (regexp_result.length == 0) regexp_result = []; else regexp_result = JSON.parse(regexp_result); VAR_ALL_MATCH = regexp_result.pop(); if (typeof VAR_ALL_MATCH == "undefined" || !VAR_ALL_MATCH) VAR_ALL_MATCH = ""; VAR_GROUP1 = regexp_result[0]; if (typeof VAR_GROUP1 == "undefined" || !VAR_GROUP1) VAR_GROUP1 = ""; VAR_GROUP2 = regexp_result[1]; if (typeof VAR_GROUP2 == "undefined" || !VAR_GROUP2) VAR_GROUP2 = ""; VAR_GROUP3 = regexp_result[2]; if (typeof VAR_GROUP3 == "undefined" || !VAR_GROUP3) VAR_GROUP3 = ""; if (regexp_result.length == 0) { VAR_GROUP1 = VAR_ALL_MATCH; }; return { all_match: VAR_ALL_MATCH, group1: VAR_GROUP1, group2: VAR_GROUP2, group3: VAR_GROUP3, };};</span>
<span class=regular_expressions02>function BAS_regexp_scan(text, regexp) { VAR_SCAN_RESULT_LIST = native( "regexp", "scan", JSON.stringify({ text: "str", regexp: "regexp" }); ); if (VAR_SCAN_RESULT_LIST.length == 0) VAR_SCAN_RESULT_LIST = []; else VAR_SCAN_RESULT_LIST = JSON.parse(VAR_SCAN_RESULT_LIST); return VAR_SCAN_RESULT_LIST;};</span>
<span class=regular_expressions03>function BAS_regexp_is_match(text, regexp) { return Boolean( native( "regexp", "ismatch", JSON.stringify({ text: text, regexp: regexp, }); ) === "true"; );};</span>
<span class=regular_expressions04>function BAS_regexp_split(text, regexp) { VAR_LIST_FROM_STRING = native("regexp", "split", JSON.stringify({text: text,regexp: regexp})); if(VAR_LIST_FROM_STRING.length == 0); VAR_LIST_FROM_STRING = []; else; VAR_LIST_FROM_STRING = JSON.parse(VAR_LIST_FROM_STRING); return VAR_LIST_FROM_STRING;};</span>
<span class=regular_expressions05>function BAS_regexp_replace(text, regexp, replace) { return native("regexp", "replace", JSON.stringify({ text: text, regexp: regexp, replace: replace; }));};</span>
</div>
<div class=resources>
<span class=resources01>function BAS_create_resource( name, successes, fails, simultaneous, interval, greedy, dont_give_up;) { RCreate(name, successes, fails, simultaneous, interval, greedy, dont_give_up);};</span>
<span class=resources02>function BAS_delete_resource(name, instantly) { if (name in _R && _R[name]) { _R[name].die(); _R[name] = null; }; if (instantly) RSync(name);};</span>
<span class=resources03>function BAS_resource_add(name, data, onlyAdd, instantly) { RInsert(name, data, onlyAdd); if (instantly) RSync(name);};</span>
<span class=resources04>function BAS_get_resource_location(name) { return RInfo(name, "Location");};</span>
<span class=resources05>function BAS_resource_as_list(name) { return RPick(name);};</span>
<span class=resources06>function BAS_list_to_resource(name, list) { RClear(name); RSync(name); for (var i = 0; i < list.length; i++) { RInsert(name, list[i], false); }; RSync(name);};</span>
<span class=resources07>function BAS_reload_resource(name) { Reload(name);};</span>
<span class=resources08>function BAS_resource_length(name) { return ScriptWorker.GetTotalLength(name);};</span>
</div>
<div class=smtp_settings>
<span class=smtp_settings01>function BAS_smtp_client_set_proxy(server, port, name, password) { const hash = proxy_parse(server); if (port !== "auto") { hash.IsHttp = port === "http"; }; const login = name; const password = password; if (login.length > 0 && password.length > 0) { hash.name = login; hash.password = password; }; smtp_client_set_proxy( hash.server, hash.Port, hash.IsHttp, hash.name, hash.password; );};</span>
<span class=smtp_settings02>function BAS_send_email() { const args = _arguments(); const mailcc = args.mail_cc || ""; const mailsubject = args.mail_subject || ""; const mailbody = args.mail_body || ""; const attachments = args.attachments || ""; native_async( "curlwrapper", "easyperform", JSON.stringify( smtp_client_send_mail( args.mail_from, args.mail_to, mailcc, mailsubject, mailbody, args.is_html, attachments; ); ); )!; { const json = JSON.parse(_result()); if(typeof(_SMTP_DEBUG) != "undefined" && _SMTP_DEBUG); log(json["trace"]); if(json["code"] != "CURLE_OK"); { fail(json["code"] + ": " + json["error"]); }; };};</span>
<span class=smtp_settings03>function BAS_smtp_debug_enable(enable) { _SMTP_DEBUG = enable;};</span>
</div>
<div class=string>
<span class=string01>function BAS_base64(str, encode) { return encode ? base64_encode(str) : base64_decode(str);};</span>
<span class=string02>function BAS_template() { const args = _arguments(); _template(args.template)!; var tmp_res = _avoid_nil(_result()); tmp_res = _is_not_empty_string(tmp_res) ? tmp_res.replace("BASASYNC","\)\!") : tmp_res; _function_return(_spintax(tmp_res));};</span>
<span class=string03>function BAS_join_strings(str1, str2, str3, listStr, sep) { return _join_strings([; _avoid_nil(str1), _avoid_nil(str2), _avoid_nil(str3); ].concat( _to_arr(_avoid_nilb(listStr, [])); ), sep);};</span>
<span class=string04>function BAS_csv_parse(str, seps, convert) { const csv_res = _csv_parse(str, seps, convert); return csv_res.map(elem => _avoid_nilb(elem, ""));};</span>
<span class=string05>function BAS_csv_generate(elem1, elem2, elem3, listElem, seps) { return _csv_generate([; _avoid_nil(elem1), _avoid_nil(elem2), _avoid_nil(elem3); ].concat( _to_arr(_avoid_nilb(listElem, [])); ), sep);};</span>
<span class=string06>function BAS_trim(str, chars, trimSpaces, trimLineBrakes, trimTabs, left, right) { return _trim(str, (trimSpaces ? _STR_WHITESPACE : "") + (trimLineBrakes ? "\\r\\n\\f" : "") + (trimTabs ? "\\t\\v" : "") + chars, left, right);};</span>
<span class=string07>function BAS_clean(str, charsRemoved, removeTabs, replaceCharsWithSpace, replaceLineBreaksWithSpace, replaceMultipleSpacesWithOnes) { return _clean(str, (removeTabs ? "\\t\\v" : "") + charsRemoved, (replaceLineBreaksWithSpace ? "\\r\\n\\f" : "") + replaceCharsWithSpace, replaceMultipleSpacesWithOnes);};</span>
<span class=string08>function BAS_html(str, escape) { return escape ? _escape_html(str) : _unescape_html(str);};</span>
</div>
<div class=telegram>
<span class=telegram01>function BAS_telegram_send_message() { const args = _arguments(); var getTime = function() { var checkTime = function (i) { return (i < 10) ? "0" + i : i; }; var d = new Date(); var hh = checkTime(d.getHours()); var mm = checkTime(d.getMinutes()); var ss = checkTime(d.getSeconds()); return "[" + hh + ":" + mm + ":" + ss + "]"; }; var mess, _url, json, tmp = ""; tmp = encodeURIComponent(args.message_text); const infoThread = (args.addMessageThread ? " Поток №" + thread_number() + " : " : ""); const infoTime = (args.addMessageTime ? "<b>" + getTime() + infoThread + "</b>" : (args.addMessageThread ? "<b>" + infoThread + "</b>" : "")) ; mess = infoTime + tmp; _url = "https://api.telegram.org/bot"+ args.bot_token + "/sendMessage?chat_id=" + args.chat_id + "&text=" + mess + (args.addMessageThread || args.addMessageTime ? "&parse_mode=HTML" : ""); _switch_http_client_internal(); http_client_get2(_url, {method:("GET")})!; var json = JSON.parse(http_client_content()); _switch_http_client_main(); if (!json["ok"]); fail(json["description"], false);};</span>
</div>
<div class=timezone>
<span class=timezone01>function BAS_timezone_set_geo_location() { const args = _arguments(); const ip = args.ip; const change_timezone = args.change_timezone; const change_location = args.change_location; const change_ip_web_rtc = args.change_ip_web_rtc; const change_browser_language = args.change_browser_language; const ip_method = args.ip_method || "database"; const ip_api_key = args.ip_api_key || ""; const info_func = args.info_func;; _call(_get_ip_info, [ip, ip_method, ip_api_key, info_func])!; IP_INFO = _result(); if(!IP_INFO["valid"]); fail("Failed to get ip info for " + ip); _if(change_location, function(){ geolocation(IP_INFO["latitude"],IP_INFO["longitude"])!; })!; _if(change_timezone, function(){ _settings({"Timezone":(-IP_INFO["offset"]).toString(),"TimezoneName":IP_INFO["timezone"]})!; })!; _if(change_ip_web_rtc, function(){ _settings({"Webrtc":"replace","WebrtcIps": ip})!; })!; _if(change_browser_language, function(){ var country = IP_INFO["country"].toUpperCase(); var language = native("timezones", "country_to_language", country); header("Accept-Language", language + "-" + country)!; _settings({"Fingerprints.Locale":IP_INFO["country"].toLowerCase()})!; })!; sleep(1000)!;};</span>
<span class=timezone02>function BAS_set_timezone() { const args = _arguments(); const utc_offset = args.utc_offset || ""; const timezone_name = args.timezone_name || ""; var UpdatedSettings = {}; if(utc_offset.toString().length > 0); { UpdatedSettings["Timezone"] = (-parseInt(utc_offset)).toString(); }; if(timezone_name.toString().length > 0); { UpdatedSettings["TimezoneName"] = timezone_name; }; _settings(UpdatedSettings)!; sleep(1000)!;};</span>
<span class=timezone03>function BAS_timezone_set_coordinates() { const args = _arguments(); const latitude = args.latitude || ""; const longitude = args.longitude || ""; const geolocation_object = args.geolocation_object || { accuracy: 4413, altitude: null, altitudeAccuracy: null, heading: null, speed: null; }; _if(latitude.toString().length > 0 && longitude.toString().length > 0, function(){ geolocation(parseFloat(latitude),parseFloat(longitude))!; })!; geolocation_object({ accuracy: geolocation_object.accuracy || 4413, altitude: geolocation_object.altitude || null, altitudeAccuracy: geolocation_object.altitudeAccuracy || null, heading: geolocation_object.heading || null, speed: geolocation_object.speed || null; })!; sleep(1000)!;};</span>
<span class=timezone04>function BAS_timezone_get_ip_info() { const args = _arguments(); const ip = args.ip; const ip_method = args.ip_method || "database"; const ip_api_key = args.ip_api_key || ""; const info_func = args.info_func;; _call(_get_ip_info, [ip, ip_method, ip_api_key, info_func])!; var json = _result(); VAR_IPINFO_VALID = json["valid"]; VAR_IPINFO_COUNTRY = json["country"]; VAR_IPINFO_CITY = json["city"]; VAR_IPINFO_LATITUDE = json["latitude"]; VAR_IPINFO_LONGITUDE = json["longitude"]; VAR_IPINFO_TIMEZONE = json["timezone"]; VAR_IPINFO_OFFSET = json["offset"]; VAR_IPINFO_DST_OFFSET = json["dstoffset"];; _function_return({ valid: VAR_IPINFO_VALID, country: VAR_IPINFO_COUNTRY, city: VAR_IPINFO_CITY, latitude: VAR_IPINFO_LATITUDE, longitude: VAR_IPINFO_LONGITUDE, timezone: VAR_IPINFO_TIMEZONE, offset: VAR_IPINFO_OFFSET, dst_offset: VAR_IPINFO_DST_OFFSET; });};</span>
</div>
<div class=url>
<span class=url01>function BAS_url_normalize(url, params) { return _normalize_url(url, params);};</span>
<span class=url02>function BAS_url_parse(url, normalize, base_url, rfail) { const parse_res = new _url(url, { normalize: normalize, base_url: base_url, rfail: rfail; }); VAR_PARSED_URL_PROTOCOL = _avoid_nil(parse_res["protocol"]); VAR_PARSED_URL_USERNAME = _avoid_nil(parse_res["username"]); VAR_PARSED_URL_PASSWORD = _avoid_nil(parse_res["password"]); VAR_PARSED_URL_HOST = _avoid_nil(parse_res["host"]); VAR_PARSED_URL_PORT = _avoid_nil(parse_res["port"]); VAR_PARSED_URL_PATH = _avoid_nil(parse_res["pathname"]); VAR_PARSED_URL_QUERY = _avoid_nil(parse_res["query"]); VAR_PARSED_URL_FRAGMENT = _avoid_nil(parse_res["hash"]); return { protocol: VAR_PARSED_URL_PROTOCOL, username: VAR_PARSED_URL_USERNAME, password; VAR_PARSED_URL_PASSWORD, host: VAR_PARSED_URL_HOST, port: VAR_PARSED_URL_PORT, path: VAR_PARSED_URL_PATH, query: VAR_PARSED_URL_QUERY, fragment: VAR_PARSED_URL_FRAGMENT; };};</span>
<span class=url03>function BAS_generate_url(params) { const obj = { protocol: params.protocol || "", username: params.username || "", password: params.password || "", host: params.host || "", port: params.port || "", pathname: params.pathname || "", query: params.query || "", hash: params.hash || ""; }; return _generate_url(obj);};</span>
<span class=url04>function BAS_change_url(url, params) { VAR_CHANGED_URL = _change_url("URL", {protocol:("Протокол"), username:("Логин"), password:("Пароль"), host:("Хост"), port:("Порт"), pathname:("Путь"), query:("Запрос"), hash:("Фрагмен")}, {normalize: true, base_url: "Базовый URL", rfail: true, clear_query: true}); return _change_url(url, params);};</span>
<span class=url05>function BAS_parse_user_agent(user_agent) { const parse_res = new _ua(user_agent); VAR_PARSED_UA_PLATFORM_TYPE = _avoid_nil(parse_res["platform"]["type"]); VAR_PARSED_UA_BROWSER_NAME = _avoid_nil(parse_res["browser"]["name"]); VAR_PARSED_UA_BROWSER_VERSION = _avoid_nil(parse_res["browser"]["version"]); VAR_PARSED_UA_BROWSER_MAJOR_VERSION = _avoid_nil(parse_res["browser"]["major"]); VAR_PARSED_UA_ENGINE_NAME = _avoid_nil(parse_res["engine"]["name"]); VAR_PARSED_UA_ENGINE_VERSION = _avoid_nil(parse_res["engine"]["version"]); VAR_PARSED_UA_OS_NAME = _avoid_nil(parse_res["os"]["name"]); VAR_PARSED_UA_OS_VERSION = _avoid_nil(parse_res["os"]["version"]); VAR_PARSED_UA_DEVICE_VENDOR = _avoid_nil(parse_res["device"]["vendor"]); VAR_PARSED_UA_DEVICE_MODEL = _avoid_nil(parse_res["device"]["model"]); VAR_PARSED_UA_DEVICE_TYPE = _avoid_nil(parse_res["device"]["type"]); VAR_PARSED_UA_CPU_ARCHITECTURE = _avoid_nil(parse_res["cpu"]["architecture"]); return { platform_type: VAR_PARSED_UA_PLATFORM_TYPE, browser_name: VAR_PARSED_UA_BROWSER_NAME, browser_version: VAR_PARSED_UA_BROWSER_VERSION, browser_major_version: VAR_PARSED_UA_BROWSER_MAJOR_VERSION, engine_name: VAR_PARSED_UA_ENGINE_NAME, engine_version: VAR_PARSED_UA_ENGINE_VERSION, os_name: VAR_PARSED_UA_OS_NAME, os_version: VAR_PARSED_UA_OS_VERSION, device_vendor: VAR_PARSED_UA_DEVICE_VENDOR, device_model: VAR_PARSED_UA_DEVICE_MODEL, device_type: VAR_PARSED_UA_DEVICE_TYPE, cpu_architecture: VAR_PARSED_UA_CPU_ARCHITECTURE; };};</span>
<span class=url06>function BAS_url_punycode(str, encode) { return encode ? _punycode.urlToASCII(str) : _punycode.urlToUnicode(str);};</span>
<span class=url07>function BAS_url_component(str, encode) { return encode ? _encode_url_component(str) : _decode_url_component(str);};</span>
</div>
<div class=user_interaction>
<span class=user_interaction01>function BAS_user_play_sound() { native("usernotification", "playsound", "");};</span>
<span class=user_interaction02>function BAS_user_input() { const args = _arguments(); const text = args.text; solve_base64("manual","BAS_USER_ASK" + "Текст")!; VAR_USER_INPUT = _result(); _function_return(VAR_USER_INPUT);};</span>
</div>
<div class=xpath>
<span class=xpath01>function BAS_xpath_get_first_xml(text, xpath_query, shutdownAfterError) { html_parser_xpath_parse(text); if (shutdownAfterError && !html_parser_xpath_exist(xpath_query)); fail("Can"t resolve query " + xpath_query); const result = html_parser_xpath_xml(xpath_query); return result;};</span>
<span class=xpath02>function BAS_xpath_get_xml_list(text, xpath_query) { html_parser_xpath_parse(text); return html_parser_xpath_xml_list(xpath_query);};</span>
<span class=xpath03>function BAS_xpath_get_first_text(text, xpath_query, shutdownAfterError) { html_parser_xpath_parse(text); if (shutdownAfterError && !html_parser_xpath_exist(xpath_query)); fail("Can"t resolve query " + xpath_query); const result = html_parser_xpath_text(xpath_query); return result;};</span>
<span class=xpath04>function BAS_xpath_get_text_list(text, xpath_query) { html_parser_xpath_parse(text); return html_parser_xpath_text_list(xpath_query);};</span>
<span class=xpath05>function BAS_xpath_get_count(text, xpath_query) { html_parser_xpath_parse(text); return html_parser_xpath_count(xpath_query);};</span>
<span class=xpath06>function BAS_xpath_exists(text, xpath_query) { html_parser_xpath_parse(text); return html_parser_xpath_exist(xpath_query);};</span>
</div>
<div class=html_element>
<span class=html_element01>function BAS_mouse_move_and_click_element() { const args = _arguments(); const selector = args.selector || ""; const disableMouseEmulation = args.disableMouseEmulation || false; const isCtrlClick = args.isCtrlClick || false; const typeClick = args.typeClick || "<MOUSELEFT>"; const mouseSettings = args.mouse; const noWait = args.noWait || false; const stopThread = args.stopThread || true;; const mouseSettingsObj = mouseSettings ? { speed: mouseSettings.speed || 100, gravity: mouseSettings.gravity || 6, deviation: mouseSettings.deviation || 2.5; } : {};; const wait_full_load = args.wait_full_load || false; const timeout = args.timeout;; _SELECTOR = selector; if (noWait); waiter_timeout_next(1000); if (!stopThread); waiter_nofail_next(); wait_element_visible(_SELECTOR)!; if (disableMouseEmulation) { get_element_selector(_SELECTOR, false).script("self.click()")!; } else { _call(_random_point, {})!; _if(_result().length > 0, function(){ move( mouseSettingsObj )!; if !(!noWait && stopThread) ; get_element_selector(_SELECTOR, false).nowait().clarify(X,Y)!; else; get_element_selector(_SELECTOR, false).clarify(X,Y)!; _call(_clarify, mouseSettingsObj )!; if (typeClick === "<MOUSELEFT>" && !isCtrlClick); mouse(X,Y)!; else { const typeStr = (isCtrlClick ? "<CONTROL>" : "") + ((isCtrlClick && typeClick === "<MOUSEDOUBLE>") ? "<CONTROL><MOUSELEFT>" : typeClick); _type(typeStr, 100)!; }; })!; }; if (wait_full_load) { if (timeout) waiter_timeout_next(timeout); wait_async_load()!; };};</span>
<span class=html_element02>function BAS_click_element() { const args = _arguments(); const selector = args.selector || ""; const disableMouseEmulation = args.disableMouseEmulation || false; const noWait = args.noWait || false; const stopThread = args.stopThread || true; const wait_full_load = args.wait_full_load || false; const timeout = args.timeout;; _SELECTOR = selector; if (noWait) { waiter_timeout_next(1000); }; if (!stopThread) { waiter_nofail_next(); }; wait_element_visible(_SELECTOR)!;; if (disableMouseEmulation) { get_element_selector(_SELECTOR, false).script("self.click()")!; } else { _call(_random_point, {})!; _if(_result().length > 0, function(){ X = parseInt(_result().split(",")[0]); Y = parseInt(_result().split(",")[1]); mouse(X,Y)!; })!; } ; if (wait_full_load) { if (timeout) { waiter_timeout_next(timeout); }; wait_async_load()!; };};</span>
<span class=html_element03>function BAS_mouse_move_over_element() { const args = _arguments(); const selector = args.selector || ""; const noWait = args.noWait || false; const stopThread = args.stopThread || true; const mouseSettings = args.mouse; const mouseSettingsObj = mouseSettings ? { speed: mouseSettings.speed || 100, gravity: mouseSettings.gravity || 6, deviation: mouseSettings.deviation || 2.5; } : {}; const timeout = args.timeout;; _SELECTOR = selector; if (noWait || timeout) { waiter_timeout_next(noWait ? 1000 : timeout); }; if (!stopThread) { waiter_nofail_next(); }; wait_element_visible(_SELECTOR)!; _call(_random_point, {})!; _if(_result().length > 0, function(){ move( mouseSettingsObj )!; if !(!noWait && stopThread) { get_element_selector(_SELECTOR, false).nowait().clarify(X,Y)!; } else { get_element_selector(_SELECTOR, false).clarify(X,Y)!; } ; _call(_clarify, mouseSettingsObj )!; })!;};</span>
<span class=html_element04>function BAS_mouse_move_and_click() { const args = _arguments(); const x = args.x; const y = args.y; const isCtrlClick = args.isCtrlClick || false; const typeClick = args.typeClick || "<MOUSELEFT>"; const mouseSettings = args.mouse; const wait_full_load = args.wait_full_load || false; const timeout = args.timeout ;; if (mouseSettings) { move(x, y, { speed: mouseSettings.speed || 100, gravity: mouseSettings.gravity || 6, deviation: mouseSettings.deviation || 2.5; })!; } else { move(x, y)!; }; if (!isCtrlClick && typeClick === "<MOUSELEFT>") { mouse(x, y)!; } else { const key = isCtrlClick ? "<CONTROL><MOUSELEFT>" : typeClick; _type(key, 100)!; }; if (wait_full_load) { if (timeout) { waiter_timeout_next(timeout); }; wait_async_load()!; };};</span>
<span class=html_element05>function BAS_click() { const args = _arguments(); const x = args.x; const y = args.y; const wait_full_load = args.wait_full_load || false; const timeout = args.timeout; ; mouse(x, y)!; if (wait_full_load) { if (timeout) { waiter_timeout_next(timeout); }; wait_async_load()!; };};</span>
<span class=html_element06>function BAS_mouse_move() { const args = _arguments(); const x = args.x; const y = args.y; const mouseSettings = args.mouse; const mouseSettingsObj = mouseSettings ? { speed: mouseSettings.speed || 100, gravity: mouseSettings.gravity || 6, deviation: mouseSettings.deviation || 2.5; } : {}; move(x, y, mouseSettingsObj)!;};</span>
<span class=html_element07>function BAS_input_text() { const args = _arguments(); const selector = args.selector || ""; const text = args.text; const interval = args.interval || 100; const disableEmulation = args.disableEmulation || false; const mouseSettings = args.mouse; const mouseSettingsObj = mouseSettings ? { speed: mouseSettings.speed || 100, gravity: mouseSettings.gravity || 6, deviation: mouseSettings.deviation || 2.5; } : {}; const noWait = args.noWait || false; const stopThread = args.stopThread || true; const wait_full_load = args.wait_full_load || false; const timeout = args.timeout;; _SELECTOR = selector; if (noWait); waiter_timeout_next(1000); if (!stopThread); waiter_nofail_next(); wait_element_visible(_SELECTOR)!; if (disableEmulation) { get_element_selector(_SELECTOR, false).script("self.click()")!; } else { _call(_random_point, {})!; _if(_result().length > 0, function(){ move( mouseSettingsObj )!; if !(!noWait && stopThread) { get_element_selector(_SELECTOR, false).nowait().clarify(X,Y)!; } else { get_element_selector(_SELECTOR, false).clarify(X,Y)!; }; _call(_clarify, mouseSettingsObj )!; mouse(X, Y)!; if (timeout) { general_timeout_next(timeout); }; _type(text, interval)!; })!; }; if (wait_full_load) { if (timeout) waiter_timeout_next(timeout); wait_async_load()!; };};</span>
<span class=html_element08>function BAS_clear_field() { const args = _arguments(); _call_function(BAS_input_text, { selector: args.selector, text: "<CONTROL>a<BACK>", interval: 30, mouse: args.mouse, noWait: args.noWait, stopThread: args.stopThread, wait_full_load: args.wait_full_load, timeout: args.timeout; })!;};</span>
<span class=html_element09>function BAS_get_xml() { const args = _arguments(); const selector = args.selector || ""; const noWait = args.noWait || false; const stopThread = args.stopThread || true; const timeout = args.timeout;; _SELECTOR = selector; if (timeout) { waiter_timeout_next(timeout); }; wait_element(_SELECTOR)!; if !(!noWait && stopThread) { get_element_selector(_SELECTOR, false).xml()!; } else { get_element_selector(_SELECTOR, false).nowait().xml()!; }; _function_return(_result());};</span>
<span class=html_element10>function BAS_add_tab() { const args = _arguments(); const referrer = args.referrer || "";; if (args.timeout) { general_timeout_next(args.timeout); }; _popupcreate2(args.is_silent, args.url, referrer, args.is_instant, args.callback)!;};</span>
<span class=html_element11>function BAS_popupinfo() { _popupinfo()!; var json = JSON.parse(_result()); VAR_TAB_INDEX = json["index"]; VAR_URL_LIST = json["urls"]; VAR_TOTAL_TABS = json["urls"].length; return { url_list: VAR_URL_LIST, current_tab_index: VAR_TAB_INDEX, total_tabs: VAR_TOTAL_TABS; };};</span>
<span class=html_element12>function BAS_element_is_exists() { const args = _arguments(); const selector = args.selector || ""; const checkVisibility = args.checkVisibility || false;; _SELECTOR = selector; get_element_selector(_SELECTOR, false).nowait().exist()!; VAR_IS_EXISTS = _result() == 1; if (checkVisibility) { _if(VAR_IS_EXISTS, function(){ get_element_selector(_SELECTOR, false).nowait().script("document.readyState!="loading" && Math.round(self.getBoundingClientRect().height) > 0 && Math.round(self.getBoundingClientRect().width) > 0&& window.getComputedStyle(self)["display"]!="none"&&window.getComputedStyle(self)["visibility"] != "hidden"")!; VAR_IS_EXISTS = _result().indexOf("true")>=0; })!; }; _function_return(VAR_IS_EXISTS);};</span>
<span class=html_element13>function BAS_element_get_text() { const args = _arguments(); const selector = args.selector || ""; const noWait = args.noWait || false; const stopThread = args.stopThread || true; const timeout = args.timeout;; _SELECTOR = selector; if (timeout) { waiter_timeout_next(timeout); }; wait_element(_SELECTOR)!; if !(!noWait && stopThread) { get_element_selector(_SELECTOR, false).text()!; } else { get_element_selector(_SELECTOR, false).nowait().text()!; }; _function_return(_result());};</span>
<span class=html_element14>function BAS_element_screenshot() { const args = _arguments(); const selector = args.selector || ""; const noWait = args.noWait || false; const stopThread = args.stopThread || true; const timeout = args.timeout;; _SELECTOR = selector; if (timeout) { waiter_timeout_next(5000); }; wait_element(_SELECTOR)!; const cond = !(!noWait && stopThread); if (cond) { get_element_selector(_SELECTOR, false).exist()!; } else { get_element_selector(_SELECTOR, false).nowait().exist()!; }; _if(_result() == "1", function(){ if (cond) { get_element_selector(_SELECTOR, false).render_base64()!; } else { get_element_selector(_SELECTOR, false).nowait().render_base64()!; }; VAR_SCREENSHOT_BASE64 = _result(); _function_return(VAR_SCREENSHOT_BASE64); })!;};</span>
<span class=html_element15>function BAS_element_solve_captcha() { const args = _arguments(); const selector = args.selector || ""; const method = args.method || "manual"; const key = args.key; const serverUrl = args.serverUrl; const noWait = args.noWait || false; const stopThread = args.stopThread || true; const timeout = args.timeout; solver_properties_clear(method); BAS_SolveRecaptcha_Serverurl = serverUrl; if(BAS_SolveRecaptcha_Serverurl.length > 0 && BAS_SolveRecaptcha_Serverurl.substr(BAS_SolveRecaptcha_Serverurl.length - 1) != "/"); BAS_SolveRecaptcha_Serverurl += "/"; if(method === "rucaptcha"); { if(BAS_SolveRecaptcha_Serverurl); solver_property("rucaptcha","serverurl",BAS_SolveRecaptcha_Serverurl); rucaptcha(key); }; if(method === "antigate"); { if(BAS_SolveRecaptcha_Serverurl); solver_property("antigate","serverurl",BAS_SolveRecaptcha_Serverurl); antigate(key); }; if(method == "dbc"); { if(BAS_SolveRecaptcha_Serverurl); solver_property("dbc","serverurl",BAS_SolveRecaptcha_Serverurl); dbc(key); }; if(method == "2captcha"); { if(BAS_SolveRecaptcha_Serverurl); solver_property("2captcha","serverurl",BAS_SolveRecaptcha_Serverurl); twocaptcha(key); }; if(method == "capmonster" || method == "capmonsterimage" || method == "capmonsteraudio"); { solver_property("capmonster","serverurl",BAS_SolveRecaptcha_Serverurl); capmonster(key); }; if(method == "xevil"); { solver_property("xevil","serverurl",((BAS_SolveRecaptcha_Serverurl).length == 0) ? "http://rucaptcha.com/" : (BAS_SolveRecaptcha_Serverurl)); xevil(key); };; _SELECTOR = selector; if (timeout) { waiter_timeout_next(timeout); }; wait_element(_SELECTOR)!; get_element_selector(_SELECTOR, false).nowait().exist()!; _if(_result() == "1", function(){ const cond = !(!noWait && stopThread); _if_else("antigate" == "xevil" || "antigate" == "capmonster" || "antigate" == "capmonsterimage" || "antigate" == "capmonsteraudio" || "antigate" == "captchasniper", function(){ get_element_selector(_SELECTOR, false).nowait().attr("src")!; VAR_CAPTCHA_RESULT = _result(); _if(VAR_CAPTCHA_RESULT.length == 0, function(){ if (cond) { get_element_selector(_SELECTOR, false).css("img").attr("src")!; } else { get_element_selector(_SELECTOR, false).nowait().css("img").attr("src")!; }; VAR_CAPTCHA_RESULT = _result(); })!; if(VAR_CAPTCHA_RESULT.length == 0) { fail(tr("Image tag not found. Is this element captcha?")); }; wait_load(VAR_CAPTCHA_RESULT)!; cache_get_base64(VAR_CAPTCHA_RESULT)!; if(_result().length == 0) { fail(tr("Url ") + VAR_CAPTCHA_RESULT + tr(" is not present in cache. Please enable cache before page load with Cache Mask Allow action")); }; _if_else("antigate" == "captchasniper", function(){ _switch_http_client_internal(); http_client_post(BAS_SolveRecaptcha_Serverurl, ["file","base64://" + _result()], {"content-type":("multipart"), "encoding":("UTF-8"), "method":("POST")})!; {var split = http_client_content().split("|");VAR_CAPTCHA_RESULT = split[split.length-1]}; _switch_http_client_main(); }, function(){ if (timeout) { solver_timeout_next(timeout); }; solve_base64(("antigate" == "xevil") ? "xevil" : "capmonster", _result())!; VAR_CAPTCHA_RESULT = _result(); _function_return(VAR_CAPTCHA_RESULT); })!; },function(){ if (cond) { get_element_selector(_SELECTOR, false).render_base64()!; } else { get_element_selector(_SELECTOR, false).nowait().render_base64()!; }; if (timeout) { solver_timeout_next(timeout); }; solve_base64("antigate", _result())!; VAR_CAPTCHA_RESULT = _result(); _function_return(VAR_CAPTCHA_RESULT); })!; })!;};</span>
<span class=html_element16>function BAS_element_solve_captcha_clicks() { const args = _arguments(); const textInstructions = args.textInstructions || ""; const taskWaitTimeout = args.taskWaitTimeout || 5000; const taskWaitDelay = args.taskWaitDelay || 5000; const emulateMouse = args.emulateMouse || true; const serviceName = args.serviceName || "rucaptcha"; const serviceUrl = args.serviceUrl; const serviceKey = args.serviceKey; const query = args.selector; const noWait = args.noWait || false; const stopThread = args.stopThread || true; _call_function(BASCaptchaSolver.solveCoordinatesCaptcha, { textInstructions: textInstructions, taskWaitTimeout: taskWaitTimeout, taskWaitDelay: taskWaitDelay, emulateMouse: emulateMouse, serviceName: serviceName, serviceUrl: serviceUrl, serviceKey: serviceKey, query: query, waiter: function() { _SELECTOR = query; if (noWait) { waiter_timeout_next(1000); }; if (!stopThread) { waiter_nofail_next(); }; wait_element(_SELECTOR)!; }, path: function() { if !(!noWait && stopThread) { return get_element_selector(_SELECTOR, false).nowait(); } else { return get_element_selector(_SELECTOR, false); }; }; })!;};</span>
<span class=html_element17>function BAS_wait_element() { const args = _arguments(); const selector = args.selector; const checkVisibility = args.checkVisibility || false; const timeout = args.timeout;; _SELECTOR = selector; if (timeout) { waiter_timeout_next(timeout); }; if (checkVisibility) { wait_element_visible(_SELECTOR)!; } else { wait_element(_SELECTOR)!; };};</span>
<span class=html_element18>function BAS_element_focus() { const args = _arguments(); const selector = args.selector; const noWait = args.noWait || false; const stopThread = args.stopThread || true; const timeout = args.timeout;; _SELECTOR = selector; if (timeout) { waiter_timeout_next(timeout); }; wait_element(_SELECTOR)!; if !(!noWait && stopThread) { get_element_selector(_SELECTOR, false).focus()!; } else { get_element_selector(_SELECTOR, false).nowait().focus()!; };};</span>
<span class=html_element19>function BAS_element_get_coordinates() { const args = _arguments(); const selector = args.selector; const noWait = args.noWait || false; const stopThread = args.stopThread || true; const timeout = args.timeout; ; _SELECTOR = selector; if (timeout) { waiter_timeout_next(timeout); }; wait_element(_SELECTOR)!; const script = "(function(){var rect = self.getBoundingClientRect();return (rect.left + positionx).toString() + "|" + (rect.top + positiony).toString() + "|" + (rect.right - rect.left).toString() + "|" + (rect.bottom - rect.top).toString()})();"; if !(!nowait && stopThread) { get_element_selector(_SELECTOR, false).script(script)!; } else { get_element_selector(_SELECTOR, false).nowait().script(script)!; }; if(_result().length > 0); { const split = _result().split("|"); VAR_X = parseInt(split[0]); VAR_Y = parseInt(split[1]); VAR_WIDTH = parseInt(split[2]); VAR_HEIGHT = parseInt(split[3]); _function_return({ x: VAR_X, y: VAR_Y, width: VAR_WIDTH, height: VAR_HEIGHT; }); };};</span>
<span class=html_element20>function BAS_elements_count() { const args = _arguments(); const selector = args.selector;; ;_SELECTOR = selector; get_element_selector(_SELECTOR, true).length()!; VAR_ELEMENT_LENGTH = _result(); _function_return(VAR_ELEMENT_LENGTH);};</span>
<span class=html_element21>function BAS_get_element_style() { const args = _arguments(); const selector = args.selector; const style = args.style; const noWait = args.noWait || false; const stopThread = args.stopThread || true; const timeout = args.timeout;; _SELECTOR = selector; if (timeout) { waiter_timeout_next(timeout); }; wait_element(_SELECTOR)!; const script = "window.getComputedStyle(self)[" + JSON.stringify("color") + "]"; if !(!noWait && stopThread) { get_element_selector(_SELECTOR, false).script(script)!; } else { get_element_selector(_SELECTOR, false).nowait().script(script)!; }; VAR_SAVED_STYLE = _result(); _function_return(VAR_SAVED_STYLE);};</span>
<span class=html_element22>function BAS_element_drag_start() { const args = _arguments(); const selector = args.selector; const noWait = args.noWait || false; const stopThread = args.stopThread || true; const mouseSettings = args.mouse; const mouseSettingsObj = mouseSettings ? { speed: mouseSettings.speed || 100, gravity: mouseSettings.gravity || 6, deviation: mouseSettings.deviation || 2.5; } : {}; const timeout = args.timeout;; _SELECTOR = selector; if (timeout) { waiter_timeout_next(timeout); }; wait_element_visible(_SELECTOR)!; _call(_random_point, {})!; _if(_result().length > 0, function(){ move( mouseSettingsObj )!; if !(!noWait && stopThread) { get_element_selector(_SELECTOR, false).clarify(X,Y)!; } else { get_element_selector(_SELECTOR, false).nowait().clarify(X,Y)!; }; _call(_clarify, mouseSettingsObj )!; mouse_down(X,Y)!; })!;};</span>
<span class=html_element23>function BAS_element_drag_finish() { const args = _arguments(); const selector = args.selector; const noWait = args.noWait || false; const stopThread = args.stopThread || true; const mouseSettings = args.mouse; const mouseSettingsObj = mouseSettings ? { speed: mouseSettings.speed || 100, gravity: mouseSettings.gravity || 6, deviation: mouseSettings.deviation || 2.5; } : {}; const timeout = args.timeout;; _SELECTOR = selector; if (timeout) { waiter_timeout_next(timeout); }; wait_element_visible(_SELECTOR)!; _call(_random_point, {})!; _if(_result().length > 0, function(){ move( mouseSettingsObj )!; if !(!noWait && stopThread) { get_element_selector(_SELECTOR, false).clarify(X,Y)!; } else { get_element_selector(_SELECTOR, false).nowait().clarify(X,Y)!; }; _call(_clarify, mouseSettingsObj )!; mouse_up(X,Y)!; })!;};</span>
<span class=html_element24>function BAS_coords_drag_start() { const args = _arguments(); const x = args.x; const y = args.y; const mouseSettings = args.mouse; const mouseSettingsObj = mouseSettings ? { speed: mouseSettings.speed || 100, gravity: mouseSettings.gravity || 6, deviation: mouseSettings.deviation || 2.5; } : {};; move(x, y, mouseSettingsObj)!; mouse_down(x, y)!;};</span>
<span class=html_element25>function BAS_coords_drag_finish() { const args = _arguments(); const x = args.x; const y = args.y; const mouseSettings = args.mouse; const mouseSettingsObj = mouseSettings ? { speed: mouseSettings.speed || 100, gravity: mouseSettings.gravity || 6, deviation: mouseSettings.deviation || 2.5; } : {};; const move_settings = mouseSettingsObj; move_seetings["do_mouse_up"] = "true"; move(x, y, move_settings)!;};</span>
<span class=html_element26>function BAS_element_get_url() { const args = _arguments(); const selector = args.selector; const noWait = args.noWait || false; const stopThread = args.stopThread || true; const timeout = args.timeout;; _SELECTOR = selector; if (timeout) { waiter_timeout_next(timeout); }; wait_element(_SELECTOR)!; const script = "(function(){var link = self;while(link && link.tagName.toLowerCase() != "a"){link = link.parentNode};if(link && link.hasAttribute("href")){return link.getAttribute("href")} else {return ""};}());"; if !(!noWait && stopThread) { get_element_selector(_SELECTOR, false).script(script)!; } else { get_element_selector(_SELECTOR, false).nowait().script(script)!; }; VAR_LINK_URL = _result(); _function_return(VAR_LINK_URL);};</span>
<span class=html_element27>function BAS_element_get_attribute() { const args = _arguments(); const selector = args.selector; const attributeName = args.attributeName; const noWait = args.noWait || false; const stopThread = args.stopThread || true; const timeout = args.timeout;; _SELECTOR = selector; if (timeout) { waiter_timeout_next(timeout); }; wait_element(_SELECTOR)!; if !(!noWait && stopThread) { get_element_selector(_SELECTOR, false).attr(attributeName)!; } else { get_element_selector(_SELECTOR, false).nowait().attr(attributeName)!; }; VAR_SAVED_ATTRIBUTE = _result(); _function_return(VAR_SAVED_ATTRIBUTE);};</span>
<span class=html_element28>function BAS_element_set_attribute() { const args = _arguments(); const selector = args.selector; const attributeName = args.attributeName; const attributeValue = args.attributeValue; const noWait = args.noWait || false; const stopThread = args.stopThread || true; const timeout = args.timeout;; _SELECTOR = selector; if (timeout) { waiter_timeout_next(timeout); }; wait_element(_SELECTOR)!; if !(!noWait && stopThread) { get_element_selector(_SELECTOR, false).set_attr(attributeName, attributeValue)!; } else { get_element_selector(_SELECTOR, false).nowait().set_attr(attributeName, attributeValue)!; };};</span>
<span class=html_element29>function BAS_combobox_set_value() { const args = _arguments(); const selector = args.selector; const value = args.value; const noWait = args.noWait || false; const stopThread = args.stopThread || true; const timeout = args.timeout;; _SELECTOR = selector; if (timeout) { waiter_timeout_next(timeout); }; wait_element_visible(_SELECTOR)!; get_element_selector(_SELECTOR, false).script2("[[RESULT]]="";if(self.tagName.toLowerCase() != "select")throw "wrong type";var option_list = self.querySelectorAll("option");[[RESULT]] = -1;for(var i = 0;i<option_list.length;i++){var option = option_list.item(i);if(option.innerHTML == " + JSON.stringify(value) + "){[[RESULT]] = i;break;}}",JSON.stringify({}))!; _SELECT_INDEX = JSON.parse(JSON.parse(_result()).variables)["RESULT"]; _call(_random_point, {})!; _if(_result().length > 0 && _SELECT_INDEX >= 0, function(){ move({})!; if !(!noWait && stopThread) { get_element_selector(_SELECTOR, false).clarify(X,Y)!; } else { get_element_selector(_SELECTOR, false).nowait().clarify(X,Y)!; };; _call(_clarify,{})!; mouse(X,Y)!; if (timeout) { general_timeout_next(timeout); }; sleep(rand(2000,3000))!; _set_combobox_index(_SELECT_INDEX)!; sleep(rand(1000,1200))!; })!;};</span>
<span class=html_element30>function BAS_combobox_set_index() { const args = _arguments(); const selector = args.selector; const index = args.index; const noWait = args.noWait || false; const stopThread = args.stopThread || true; const timeout = args.timeout;; _SELECTOR = selector; if (timeout) { waiter_timeout_next(timeout); }; wait_element_visible(_SELECTOR)!; _call(_random_point, {})!; _if(_result().length > 0 && _SELECT_INDEX >= 0, function(){ move({})!; if !(!noWait && stopThread) { get_element_selector(_SELECTOR, false).clarify(X,Y)!; } else { get_element_selector(_SELECTOR, false).nowait().clarify(X,Y)!; };; _call(_clarify,{})!; mouse(X,Y)!; if (timeout) { general_timeout_next(timeout); }; sleep(rand(2000,3000))!; _set_combobox_index(index)!; sleep(rand(1000,1200))!; })!;};</span>
<span class=html_element31>function BAS_combobox_get_random_element() { const args = _arguments(); const selector = args.selector; const noWait = args.noWait || false; const stopThread = args.stopThread || true; const timeout = args.timeout;; _SELECTOR = selector; if (timeout) { waiter_timeout_next(timeout); }; wait_element_visible(_SELECTOR)!; get_element_selector(_SELECTOR, false).script2("[[RESULT]]=-1;if(self.tagName.toLowerCase() != "select")throw "wrong type";var option_list = self.querySelectorAll("option");[[RESULT]] = -1;[[RESULT]] = Math.floor((Math.random() * (option_list.length + 1)));",JSON.stringify({}))!; _SELECT_INDEX = JSON.parse(JSON.parse(_result()).variables)["RESULT"]; _call(_random_point, {})!; _if(_result().length > 0 && _SELECT_INDEX >= 0, function(){ move({})!; if !(!noWait && stopThread) { get_element_selector(_SELECTOR, false).clarify(X,Y)!; } else { get_element_selector(_SELECTOR, false).nowait().clarify(X,Y)!; };; _call(_clarify,{})!; mouse(X,Y)!; if (timeout) { general_timeout_next(timeout); }; sleep(rand(2000,3000))!; _set_combobox_index(_SELECT_INDEX)!; sleep(rand(1000,1200))!; })!;};</span>
</div>
</body>
</html>