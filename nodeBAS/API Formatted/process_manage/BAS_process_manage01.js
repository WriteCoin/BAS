function BAS_process_run() { const args = _arguments(); const script = args.script; const dir = args.dir; RANDOM_FILE = "temp_" + rand() + ".bat"; native("filesystem", "writefile", JSON.stringify({path: RANDOM_FILE,value: "chcp 65001\r\n" + ((dir.length>0) ? ("cd " + dir + "\r\n") : "" ) + ((script).replace(/\r?\n/g, "\r\n")),base64:false,append:false})); native_async("processmanager", "start", JSON.stringify({location: RANDOM_FILE, working_folder: "", waitfinish: true, arguments: "", version: 2}))!; try; { var split = _result().split(","); VAR_PROCESS_STANDART_OUTPUT = base64_decode(split[0]); VAR_PROCESS_ERROR_OUTPUT = base64_decode(split[1]); }catch(e); { VAR_PROCESS_STANDART_OUTPUT = _result(); }; sleep(1000)!; native("filesystem", "removefile", RANDOM_FILE); _function_return({ process_standart_output: VAR_PROCESS_STANDART_OUTPUT, process_error_output: VAR_PROCESS_ERROR_OUTPUT; });};